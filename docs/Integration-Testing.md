# ssh-utils 集成测试报告
## 测试环境
- 操作系统：Ubuntu 22.04
- 测试工具链：rustc 1.80.1 (3f5fd8dd4 2024-08-06)

## 测试用例
| **用例编号** | **用例名称** | **前置条件** | **测试步骤** | **预期结果** | **实际结果** | **是否通过** |
| --- | --- | --- | --- | --- | --- | --- |
| START001 | 初始化程序 | 1. 安装 ssh-utils 工具之后第一次启动 | 1. 使用命令行打开 ssh-utils 启动程序 | 要求输入一个初始化密码（或者为空） | 与预期一致 | 通过 |
| START002 | 普通启动程序，密码错误 | 1. 之前启动过一次程序 2. 密码不为空 | 1. 使用命令行打开 ssh-utils 启动程序。 2. 输入错误的密码 | 启动失败，提示“密码错误” | 与预期一致 | 通过 |
| START003 | 普通启动程序，密码正确 | 1. 之前启动过一次程序 2. 密码不为空 | 1. 使用命令行打开 ssh-utils 启动程序。 2. 输入正确的密码 | 启动成功，进入选择服务器界面 | 与预期一致 | 通过 |
| START004 | 普通启动程序，不设置密码 | 1. 之前启动过一次程序 2. 密码为空 | 1. 使用命令行打开 ssh-utils 启动程序。 2. 密码留空 | 启动成功，进入选择服务器界面 | 与预期一致 | 通过 |
| GUI001 | 进入选择服务器界面，添加服务器 | 1. 成功启动程序 2. 进入选择服务器界面 | 1. 按下 A 进入添加服务器界面 | 进入添加服务器界面 | 与预期一致 | 通过 |
| GUI002 | 进入选择服务器界面，修改服务器 | 1. 成功启动程序 2. 进入选择服务器界面 | 1. 按下 E 进入修改服务器界面 | 进入修改服务器界面 | 与预期一致 | 通过 |
| GUI003 | 进入选择服务器界面，删除服务器 | 1. 成功启动程序 2. 进入选择服务器界面 | 1. 通过小键盘上下按键切换服务器 2. 按下 E 删除服务器 | 删除保存的服务器信息 | 与预期一致 | 通过 |
| GUI004 | 进入添加服务器界面，切换条目 | 1. 成功启动程序 2. 进入选择服务器界面 3. 进入添加服务器界面 | 1. 通过小键盘上下按键可以切换表单条目 | 切换表单条目 | 与预期一致 | 通过 |
| GUI005 | 添加服务器界面，填充所有条目，然后保存配置 | 1. 成功启动程序 2. 进入选择服务器界面 3. 进入添加服务器界面 | 1. 填充表单条目 2. 按下 Ctrl + S 保存配置 | 回到选择服务器界面，新加入的服务器可以被识别 | 与预期一致 | 通过 |
| GUI006 | 添加服务器界面，将 user/ip/name 留空，然后保存配置 | 1. 成功启动程序 2. 进入选择服务器界面 3. 进入添加服务器界面 | 1. 留空表单条目 2. 按下 Ctrl + S 保存配置 | 阻止回到选择服务器界面 | 与预期一致 | 通过 |
| SSH001 | 连接服务器 | 1. 添加服务器信息 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 尝试连接服务器 | 与预期一致 | 通过 |
| SSH002 | 连接服务器，IP 不可用 | 1. 添加服务器信息 2. 添加的 IP 或域名不可用 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （No route to host） | 与预期一致 | 通过 |
| SSH003 | 连接服务器，用户名不存在 | 1. 添加服务器信息 2. 添加的用户名不存在 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （Authentication failed） | 与预期一致 | 通过 |
| SSH004 | 连接服务器，密码错误 | 1. 添加服务器信息 2. 添加的密码错误 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （Authentication failed） | 与预期一致 | 通过 |
| SSH005 | 连接服务器，端口错误 | 1. 添加服务器信息 2. 添加的端口错误 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （Connection refused） | 与预期一致 | 通过 |
| SSH006 | 连接服务器，使用密码连接服务器 | 1. 添加正确的服务器信息 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 登录进服务器 | 与预期一致 | 通过 |
| KEY001 | 连接服务器，使用密钥连接服务器 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径存在密钥 ~/.ssh/ 4. 密钥已被复制到远程服务器 | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 登录进服务器 | 与预期一致 | 通过 |
| KEY002 | 连接服务器，使用密钥连接服务器，密钥不存在 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径不存在密钥 ~/.ssh/ | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （No suitable SSH key found） | 与预期一致 | 通过 |
| KEY003 | 连接服务器，使用密钥连接服务器，密钥错误 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径的密钥错误（未复制到远程服务器） | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 返回错误弹窗 （public key authentication failed） | 与预期一致 | 通过 |
| KEY004 | 连接服务器，使用密钥连接服务器，密钥需要输入密码 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径存在密钥 ~/.ssh/ 4. 密钥已被复制到远程服务器 5. 密钥存在 passphrase | 1. 选择需要连接的服务器 2. 按下 Enter 键 | 弹出消息提示框，让用户输入密钥的 passphrase | 与预期一致 | 通过 |
| KEY005 | 连接服务器，使用密钥连接服务器，密钥需要输入 passphrase，输入的 passphrase 正确 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径存在密钥 ~/.ssh/ 4. 密钥已被复制到远程服务器 5. 密钥存在 passphrase | 1. 选择需要连接的服务器 2. 按下 Enter 键 3. 输入正确 passphrase | 登录进服务器 | 与预期一致 | 通过 |
| KEY006 | 连接服务器，使用密钥连接服务器，密钥需要输入 passphrase，输入的 passphrase 错误 | 1. 添加正确的服务器信息 2. 密码留空 3. 当前用户 home 路径存在密钥 ~/.ssh/ 4. 密钥已被复制到远程服务器 5. 密钥存在 passphrase | 1. 选择需要连接的服务器 2. 按下 Enter 键 3. 输入错误 passphrase | 返回错误弹窗 （wrong passphrase） | 与预期一致 | 通过 |
| SSH007 | 正确连接服务器后，通信一段时间后，服务器连接中断 | 1. 正确连接服务器 2. 出于一些原因服务器中断（关机、网络中断等） | 1. 远程服务器执行 `shutdown -h now` 关机 | 退出服务器，并回到选择服务器界面 | 与预期一致 | 通过 |
| SSH008 | 正确连接服务器后，改变终端窗口大小 | 1. 正确连接服务器 | 1. 改变连接终端的窗口大小 | 远程 SSH 终端与本地终端大小一起改变 | 与预期一致 | 通过 |
| CLI001 | 执行清除用户配置命令，同意执行 | 1. 使用 `ssh-utils -f` 命令 | 1. 在弹出的警告输入 y | 删除保存在用户目录的配置文件 | 与预期一致 | 通过 |
| CLI002 | 执行清除用户配置命令，不同意执行 | 1. 使用 `ssh-utils -f` 命令 | 1. 在弹出的警告输入 N | 退出程序 | 与预期一致 | 通过 |
